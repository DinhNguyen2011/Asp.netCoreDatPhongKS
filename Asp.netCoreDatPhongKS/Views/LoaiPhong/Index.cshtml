@model IEnumerable<Asp.netCoreDatPhongKS.Models.LoaiPhong>

<link href="~/css/dsLPhong.css" rel="stylesheet" />
<h2 class="text-center td-title">Danh sách loại phòng</h2>

<form method="get" class="mb-4 p-3 td-card">
    <div class="row">
        <div class="col-md-3">
            <label>Loại phòng:</label>
            <select name="loai" class="form-select">
                @{
                    var loaiPhongOptions = new List<string> { "Thường", "VIP", "Thương gia" };
                    var loaiSelected = ViewBag.Loai as string;
                }

                @Html.Raw($"<option value=\"\" {(string.IsNullOrEmpty(loaiSelected) ? "selected" : "")}>-- Tất cả --</option>")

                @foreach (var loai in loaiPhongOptions)
                {
                    var selected = loai == loaiSelected ? "selected" : "";
                    @Html.Raw($"<option value=\"{loai}\" {selected}>{loai}</option>")
                }
            </select>




        </div>

        <div class="col-md-3">
            <label>Giá từ:</label>
            <input type="number" name="minGia" class="form-control" value="@ViewBag.MinGia" placeholder="VD: 500000" />
        </div>

        <div class="col-md-3">
            <label>Giá đến:</label>
            <input type="number" name="maxGia" class="form-control" value="@ViewBag.MaxGia" placeholder="VD: 8000000" />
        </div>

        <div class="col-md-2">
            <label>Số người:</label>
            <input type="number" name="soNguoi" class="form-control" value="@ViewBag.SoNguoi" min="1" />
        </div>

        <div class="col-md-3 d-flex align-items-end gap-2" style="margin:20px 0px !important;">
            <button type="submit" class="td-button w-50">Lọc</button>
            <a href="@Url.Action("Index", "LoaiPhong")" class="td-button w-50 text-center">Tải lại tất cả</a>
        </div>
    </div>
</form>

<div class="row td-container">
    @foreach (var item in Model)
    {
        var bgImage = string.IsNullOrEmpty(item.AnhDemo) ? Url.Content("~/images/noimage.jpg") : Url.Content(item.AnhDemo);

        <div class="col-md-4 mb-4">
            <div class="td-card p-3 shadow-sm td-bg-item" style="background-image: url('@bgImage'); ">
                <div class="td-bg-overlay p-3">
                    <h5 class="td-title text-white">@item.TenLoai</h5>
                    <p class="text-white">@item.MoTa</p>
                    <p class="text-white"><strong>Giá cơ bản:</strong> @(item.GiaCoBan?.ToString("N0")) VNĐ</p>
                    <p class="text-white"><strong>Số người tối đa:</strong> @item.SoluongNguoi</p>

                    <a asp-controller="Home" asp-action="Index" asp-route-id="@item.LoaiPhongId" class="td-button mt-2">
                       Đặt phòng
                    </a>
                </div>
            </div>
        </div>
    }

</div>

<script>
    // Ví dụ hiệu ứng click nút td-button
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.td-button').forEach(btn => {
            btn.addEventListener('click', function () {
                btn.innerText = 'Đang tải...';
            });
        });
    });
</script>

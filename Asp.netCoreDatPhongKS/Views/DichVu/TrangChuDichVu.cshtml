@model IEnumerable<Asp.netCoreDatPhongKS.Models.DichVu>

@{
    ViewData["Title"] = "Dịch Vụ";
}
<link href="~/css/dichvu.css" rel="stylesheet" />

<div class="service-container">
    <h1>Danh Sách Dịch Vụ</h1>

    <!-- Form Bộ lọc -->
    <form asp-action="TrangChuDichVu" method="get" class="filter-form">
        <div class="form-group">
            <label for="loaiDichVu">Lọc theo loại dịch vụ</label>
            <select name="loaiDichVu" class="form-control">
                @foreach (var item in ViewBag.LoaiDichVu)
                {
                    <option value="@item.Value" selected="@(item.Selected ? "selected" : null)">@item.Text</option>
                }
            </select>
        </div>
    </form>

    <!-- Danh sách Dịch vụ -->
    <div class="row">
        @if (Model.Any())
        {
            @foreach (var dichVu in Model)
            {
                <div class="col-md-4 mb-4">
                    <div class="service-card card h-100">
                        @if (!string.IsNullOrEmpty(dichVu.HinhAnh))
                        {
                            <img style="border-radius:10px;" src="@dichVu.HinhAnh" class="card-img-top" alt="@dichVu.TenDichVu" />
                        }
                        else
                        {
                            <img src="/images/default-service.jpg" class="card-img-top" alt="Hình mặc định" />
                        }
                        <div class="card-body">
                            <h5 class="card-title">@dichVu.TenDichVu</h5>
                            <p class="card-text">@dichVu.MoTa</p>
                            <p class="card-text price"><strong>Giá:</strong> @dichVu.DonGia.ToString("C", new System.Globalization.CultureInfo("vi-VN"))</p>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <p class="no-service-message">Không có dịch vụ nào phù hợp với bộ lọc.</p>
        }
    </div>
</div>

<script>
    // Gửi form khi thay đổi bộ lọc
    document.querySelector('select[name="loaiDichVu"]').addEventListener('change', function () {
        this.form.submit();
    });
</script>